<!DOCTYPE html>
<html lang="ru">
<head>
  <title>–ö–∞–ª–µ–Ω–¥–∞—Ä—å –∫–æ–Ω—Ü–µ—Ä—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }
    body {
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
      color: #333;
      transition: background-color 0.5s ease;
    }
    header {
      margin-bottom: 20px;
      text-align: center;
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
    }
    .bar-button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    .bar-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    .bar-button.active {
      transform: scale(1.05);
    }
    #elmuchoButton {
      background-color: #ff5733; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π –¥–ª—è El'Mucho */
      color: white;
    }
    #elmuchoButton:hover {
      background-color: #e64a2a;
    }
    #elmuchoButton.active {
      box-shadow: 0 0 0 3px rgba(255, 87, 51, 0.5);
    }
    #cleverButton {
      background-color: #2a7a39; /* –¢—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–π –¥–ª—è Clever */
      color: white;
    }
    #cleverButton:hover {
      background-color: #1f5b2b;
    }
    #cleverButton.active {
      box-shadow: 0 0 0 3px rgba(42, 122, 57, 0.5);
    }
    select {
      padding: 10px 15px;
      font-size: 16px;
      border: none;
      border-radius: 12px;
      background-color: #ffffff;
      color: #333;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      outline: none;
      transition: box-shadow 0.3s ease, transform 0.2s ease;
      appearance: none;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23333" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 10px center;
      background-size: 18px;
      min-width: 150px;
      margin: 0 10px;
    }
    select:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }
    select:focus {
      box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.3);
    }
    #calendar {
      border-collapse: collapse;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      background-color: #fff;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      overflow: hidden;
      transition: background-color 0.5s ease, box-shadow 0.5s ease;
    }
    #calendar th {
      border: 1px solid #ddd;
      padding: 12px;
      font-weight: bold;
      transition: background-color 0.5s ease, color 0.5s ease;
    }
    #calendar td {
      border: 1px solid #ddd;
      padding: 10px;
      min-width: 120px;
      min-height: 120px;
      vertical-align: top;
      position: relative;
      background-color: #ffffff;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeIn 0.6s ease-out forwards;
      animation-delay: calc(var(--index) * 0.05s);
      transition: background-color 0.5s ease;
    }
    #calendar td.has-note {
      transition: background-color 0.5s ease;
    }
    #calendar td:hover {
      transform: scale(1.02);
      transition: transform 0.3s ease, background-color 0.3s ease;
    }
    .day-number {
      position: absolute;
      top: 5px;
      left: 5px;
      font-size: 14px;
      color: #666;
      font-weight: bold;
      transition: color 0.5s ease;
    }
    .note-section {
      margin-top: 20px;
    }
    .band-name, .price, .notes {
      width: 100%;
      padding: 6px;
      margin-bottom: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      outline: none;
      transition: border-color 0.5s ease;
    }
    .band-name:focus, .price:focus, .notes:focus {
      border-color: inherit;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    }
    .checkbox-container {
      margin-top: 5px;
      margin-bottom: 5px;
    }
    .checkbox-container label {
      margin-right: 15px;
      font-size: 14px;
      color: #666;
      transition: color 0.5s ease;
    }
    .checkbox-container input {
      margin-right: 5px;
    }
    .button-container {
      display: flex;
      justify-content: space-between;
      padding: 15px;
      max-width: 1200px;
      margin: 0 auto;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.3s, scale 0.3s;
    }
    button:hover {
      transform: translateY(-2px) scale(1.05);
    }
    button:active {
      transform: translateY(0) scale(0.98);
    }
    #entryList {
      margin-top: 20px;
      max-width: 1200px;
      margin: 20px auto;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      transition: background-color 0.5s ease;
    }
    #entryList ul {
      list-style-type: none;
      padding: 0;
    }
    #entryList li {
      padding: 10px;
      border-bottom: 1px solid #ddd;
      font-size: 16px;
      white-space: pre-wrap;
      transition: border-color 0.5s ease;
    }
    #entryList li:last-child {
      border-bottom: none;
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è El'Mucho (–õ–∞—Ç–∏–Ω–æ–∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π –±–∞—Ä) */
    body.elmucho {
      background-color: #ffe8d6; /* –¢—ë–ø–ª—ã–π –∫—Ä–µ–º–æ–≤—ã–π —Ñ–æ–Ω */
    }
    #calendar.elmucho {
      background-color: #ffebd9; /* –°–≤–µ—Ç–ª–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π —Ñ–æ–Ω */
      box-shadow: 0 2px 10px rgba(255, 87, 51, 0.3);
    }
    #calendar.elmucho th {
      background-color: #ff5733; /* –Ø—Ä–∫–∏–π –æ—Ä–∞–Ω–∂–µ–≤—ã–π */
      color: #fff;
    }
    #calendar.elmucho td {
      background-color: #fff5e6; /* –û—á–µ–Ω—å —Å–≤–µ—Ç–ª–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π */
    }
    #calendar.elmucho td.has-note {
      background-color: #ffd1b3; /* –õ—ë–≥–∫–∏–π –æ—Ä–∞–Ω–∂–µ–≤—ã–π –¥–ª—è –∑–∞–º–µ—Ç–æ–∫ */
    }
    #calendar.elmucho td:hover {
      background-color: #ffcc99; /* –ë–æ–ª–µ–µ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    }
    #calendar.elmucho .day-number {
      color: #cc3300; /* –¢—ë–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π */
    }
    #calendar.elmucho .band-name:focus, #calendar.elmucho .price:focus, #calendar.elmucho .notes:focus {
      border-color: #ff5733; /* –û—Ä–∞–Ω–∂–µ–≤–∞—è –æ–±–≤–æ–¥–∫–∞ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
    }
    #calendar.elmucho .checkbox-container label {
      color: #336600; /* –¢—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–π –∞–∫—Ü–µ–Ω—Ç */
    }
    .elmucho .button-container button {
      background-color: #ff5733;
      color: #fff;
    }
    .elmucho .button-container button:hover {
      background-color: #e64a2a;
    }
    #entryList.elmucho {
      background-color: #ffebd9;
    }
    #entryList.elmucho li {
      border-color: #ff9966; /* –û—Ä–∞–Ω–∂–µ–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ */
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è Clever (–ò—Ä–ª–∞–Ω–¥—Å–∫–∏–π –ø–∞–±) */
    body.clever {
      background-color: #e6f0e6; /* –°–≤–µ—Ç–ª–æ-–∑–µ–ª—ë–Ω—ã–π —Ñ–æ–Ω */
    }
    #calendar.clever {
      background-color: #f0f7f0; /* –û—á–µ–Ω—å —Å–≤–µ—Ç–ª–æ-–∑–µ–ª—ë–Ω—ã–π —Ñ–æ–Ω */
      box-shadow: 0 2px 10px rgba(42, 122, 57, 0.3);
    }
    #calendar.clever th {
      background-color: #2a7a39; /* –¢—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–π */
      color: #ffd700; /* –ó–æ–ª–æ—Ç–æ–π —Ç–µ–∫—Å—Ç */
    }
    #calendar.clever td {
      background-color: #f7faf7; /* –ü–æ—á—Ç–∏ –±–µ–ª—ã–π —Å –∑–µ–ª—ë–Ω—ã–º –æ—Ç—Ç–µ–Ω–∫–æ–º */
    }
    #calendar.clever td.has-note {
      background-color: #cce6cc; /* –õ—ë–≥–∫–∏–π –∑–µ–ª—ë–Ω—ã–π –¥–ª—è –∑–∞–º–µ—Ç–æ–∫ */
    }
    #calendar.clever td:hover {
      background-color: #b3d9b3; /* –ë–æ–ª–µ–µ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π –∑–µ–ª—ë–Ω—ã–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    }
    #calendar.clever .day-number {
      color: #1f5b2b; /* –¢—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–π */
    }
    #calendar.clever .band-name:focus, #calendar.clever .price:focus, #calendar.clever .notes:focus {
      border-color: #2a7a39; /* –¢—ë–º–Ω–æ-–∑–µ–ª—ë–Ω–∞—è –æ–±–≤–æ–¥–∫–∞ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
    }
    #calendar.clever .checkbox-container label {
      color: #8a6d3b; /* –ö–æ—Ä–∏—á–Ω–µ–≤—ã–π –∞–∫—Ü–µ–Ω—Ç */
    }
    .clever .button-container button {
      background-color: #2a7a39;
      color: #ffd700; /* –ó–æ–ª–æ—Ç–æ–π —Ç–µ–∫—Å—Ç */
    }
    .clever .button-container button:hover {
      background-color: #1f5b2b;
    }
    #entryList.clever {
      background-color: #f0f7f0;
    }
    #entryList.clever li {
      border-color: #8bc34a; /* –°–≤–µ—Ç–ª–æ-–∑–µ–ª—ë–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ */
    }

    @media (max-width: 768px) {
      body { padding: 10px; }
      header { margin-bottom: 15px; flex-wrap: wrap; gap: 10px; }
      .bar-button { padding: 8px 16px; font-size: 14px; }
      select { padding: 6px 12px; font-size: 14px; margin: 0 5px; min-width: 120px; }
      #calendar { max-width: 100%; box-shadow: none; }
      #calendar th, #calendar td { padding: 8px; min-width: 80px; min-height: 100px; }
      #calendar td:hover { transform: none; }
      .day-number { font-size: 12px; }
      .band-name, .price, .notes { padding: 4px; font-size: 12px; }
      .checkbox-container label { font-size: 12px; }
      .button-container { padding: 10px; }
      button { padding: 8px 16px; font-size: 14px; }
      #entryList { padding: 10px; margin: 15px auto; }
      #entryList li { padding: 8px; font-size: 14px; }
    }
    @media (max-width: 480px) {
      #calendar th, #calendar td { min-width: 60px; min-height: 90px; }
      .band-name, .price, .notes { font-size: 10px; padding: 3px; }
      .checkbox-container label { font-size: 10px; }
      .button-container { flex-direction: column; padding: 8px; gap: 10px; }
      button { padding: 6px 12px; font-size: 12px; width: 100%; }
      #entryList li { font-size: 12px; padding: 6px; }
      select { min-width: 100px; }
      .bar-button { padding: 6px 12px; font-size: 12px; width: auto; }
    }
  </style>
</head>
<body>
  <header>
    <button id="elmuchoButton" class="bar-button active">El'Mucho</button>
    <div>
      <select id="monthSelect"></select>
      <select id="yearSelect"></select>
    </div>
    <button id="cleverButton" class="bar-button">Clever</button>
  </header>
  <table id="calendar">
    <thead>
      <tr>
        <th>–í—Å</th><th>–ü–Ω</th><th>–í—Ç</th><th>–°—Ä</th><th>–ß—Ç</th><th>–ü—Ç</th><th>–°–±</th>
      </tr>
    </thead>
    <tbody id="calendarBody"></tbody>
  </table>
  <div class="button-container">
    <button id="clearAll">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏</button>
    <button id="listAll">–í—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏</button>
    <button id="listPoster">–í—ã–≤–µ—Å—Ç–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∞—Ñ–∏—à–∏</button>
  </div>
  <div id="entryList"></div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const monthSelect = document.getElementById('monthSelect');
      const yearSelect = document.getElementById('yearSelect');
      const calendar = document.getElementById('calendar');
      const calendarBody = document.getElementById('calendarBody');
      const elmuchoButton = document.getElementById('elmuchoButton');
      const cleverButton = document.getElementById('cleverButton');
      const clearAllButton = document.getElementById('clearAll');
      const listAllButton = document.getElementById('listAll');
      const listPosterButton = document.getElementById('listPoster');
      const entryList = document.getElementById('entryList');
      const body = document.body;

      const months = ["–Ø–Ω–≤–∞—Ä—å", "–§–µ–≤—Ä–∞–ª—å", "–ú–∞—Ä—Ç", "–ê–ø—Ä–µ–ª—å", "–ú–∞–π", "–ò—é–Ω—å", "–ò—é–ª—å", "–ê–≤–≥—É—Å—Ç", "–°–µ–Ω—Ç—è–±—Ä—å", "–û–∫—Ç—è–±—Ä—å", "–ù–æ—è–±—Ä—å", "–î–µ–∫–∞–±—Ä—å"];
      const weekdays = ["–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ", "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫", "–í—Ç–æ—Ä–Ω–∏–∫", "–°—Ä–µ–¥–∞", "–ß–µ—Ç–≤–µ—Ä–≥", "–ü—è—Ç–Ω–∏—Ü–∞", "–°—É–±–±–æ—Ç–∞"];

      let currentBar = 'elmucho'; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é El'Mucho
      updateTheme(currentBar);

      // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –º–µ—Å—è—Ü–µ–≤
      months.forEach((name, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.text = name;
        monthSelect.appendChild(option);
      });

      // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –≥–æ–¥–æ–≤
      const currentYear = new Date().getFullYear();
      for (let i = currentYear - 10; i <= currentYear + 10; i++) {
        const option = document.createElement('option');
        option.value = i;
        option.text = i;
        yearSelect.appendChild(option);
      };

      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
      const today = new Date();
      yearSelect.value = today.getFullYear();
      monthSelect.value = today.getMonth();
      generateCalendar(today.getFullYear(), today.getMonth());

      // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –±–∞—Ä–æ–≤
      elmuchoButton.addEventListener('click', () => {
        currentBar = 'elmucho';
        elmuchoButton.classList.add('active');
        cleverButton.classList.remove('active');
        updateTheme(currentBar);
        generateCalendar(parseInt(yearSelect.value), parseInt(monthSelect.value));
        entryList.innerHTML = '';
      });

      cleverButton.addEventListener('click', () => {
        currentBar = 'clever';
        cleverButton.classList.add('active');
        elmuchoButton.classList.remove('active');
        updateTheme(currentBar);
        generateCalendar(parseInt(yearSelect.value), parseInt(monthSelect.value));
        entryList.innerHTML = '';
      });

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–µ—Å—è—Ü–∞ –∏ –≥–æ–¥–∞
      monthSelect.addEventListener('change', () => generateCalendar(parseInt(yearSelect.value), parseInt(monthSelect.value)));
      yearSelect.addEventListener('change', () => generateCalendar(parseInt(yearSelect.value), parseInt(monthSelect.value)));

      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫
      calendarBody.addEventListener('input', (e) => {
        if (e.target.classList.contains('band-name') || e.target.classList.contains('price') || e.target.classList.contains('notes')) {
          if (e.target.classList.contains('price')) {
            e.target.value = e.target.value.replace(/[^0-9]/g, '');
          }
          saveNote(e.target.closest('td'));
        }
      });

      calendarBody.addEventListener('change', (e) => {
        if (e.target.type === 'checkbox') {
          saveNote(e.target.closest('td'));
        }
      });

      // –û—á–∏—Å—Ç–∫–∞ –∑–∞–ø–∏—Å–µ–π —Ç–µ–∫—É—â–µ–≥–æ –±–∞—Ä–∞
      clearAllButton.addEventListener('click', () => {
        if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –±–∞—Ä–∞?')) {
          const prefix = `calendar_${currentBar}_`;
          Object.keys(localStorage)
            .filter(key => key.startsWith(prefix))
            .forEach(key => localStorage.removeItem(key));
          generateCalendar(parseInt(yearSelect.value), parseInt(monthSelect.value));
          entryList.innerHTML = '';
        }
      });

      // –í—ã–≤–æ–¥ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π
      listAllButton.addEventListener('click', () => {
        entryList.innerHTML = '';
        const prefix = `calendar_${currentBar}_`;
        const keys = Object.keys(localStorage).filter(key => key.startsWith(prefix));
        if (keys.length === 0) {
          entryList.textContent = '–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –¥–ª—è –≤—ã–≤–æ–¥–∞.';
          return;
        }
        keys.sort();
        const ul = document.createElement('ul');
        let hasEntries = false;
        keys.forEach(key => {
          const note = JSON.parse(localStorage.getItem(key) || '{}');
          if (note.bandName || note.price || note.notes || note.account || note.sound) {
            const dateStr = key.replace(prefix, '');
            const [year, month, day] = dateStr.split('-').map(Number);
            const formattedDate = `${day} ${months[month - 1]}`;
            const noteText = [
              note.bandName || '',
              note.price ? `${note.price}–∫` : '',
              note.notes || '',
              note.account ? '–°—á—ë—Ç' : '',
              note.sound ? '–ó–≤—É–∫' : ''
            ].filter(Boolean).join(', ');
            const li = document.createElement('li');
            li.textContent = `${formattedDate}: ${noteText}`;
            ul.appendChild(li);
            hasEntries = true;
          }
        });
        if (hasEntries) {
          entryList.appendChild(ul);
        } else {
          entryList.textContent = '–ù–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π.';
        }
      });

      // –í—ã–≤–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∞—Ñ–∏—à–∏
      listPosterButton.addEventListener('click', () => {
        entryList.innerHTML = '';
        const prefix = `calendar_${currentBar}_`;
        const keys = Object.keys(localStorage).filter(key => key.startsWith(prefix));
        if (keys.length === 0) {
          entryList.textContent = '–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –¥–ª—è –≤—ã–≤–æ–¥–∞.';
          return;
        }
        keys.sort();
        const ul = document.createElement('ul');
        let hasEntries = false;
        keys.forEach(key => {
          const note = JSON.parse(localStorage.getItem(key) || '{}');
          if (note.bandName) {
            const dateStr = key.replace(prefix, '');
            const [year, month, day] = dateStr.split('-').map(Number);
            const date = new Date(year, month - 1, day);
            const dayOfWeek = weekdays[date.getDay()];
            const formattedDate = `${day} ${months[month - 1]}`;
            const posterText = `üå∂Ô∏è ${currentBar === 'elmucho' ? "El'Mucho" : 'Clever'}\n\n${formattedDate}\n${dayOfWeek}\n22:00\n–í—Ö–æ–¥ —Å–≤–æ–±–æ–¥–Ω—ã–π\n–õ–µ–Ω–∏–Ω–∞, 41\n\n${note.bandName}`;
            const li = document.createElement('li');
            li.textContent = posterText;
            ul.appendChild(li);
            hasEntries = true;
          }
        });
        if (hasEntries) {
          entryList.appendChild(ul);
        } else {
          entryList.textContent = '–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –≥—Ä—É–ø–ø.';
        }
      });

      // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫
      function saveNote(td) {
        if (!td) return;
        const date = td.getAttribute('data-date');
        const noteData = {
          bandName: td.querySelector('.band-name').value || '',
          price: td.querySelector('.price').value || '',
          notes: td.querySelector('.notes').value || '',
          account: td.querySelector('#account').checked,
          sound: td.querySelector('#sound').checked
        };
        localStorage.setItem(`calendar_${currentBar}_${date}`, JSON.stringify(noteData));
        td.classList.toggle('has-note', Object.values(noteData).some(val => val));
      }

      // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
      function generateCalendar(year, month) {
        calendarBody.innerHTML = '';
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const startingDay = new Date(year, month, 1).getDay();
        const numRows = Math.ceil((startingDay + daysInMonth) / 7);
        let day = 1;

        for (let i = 0; i < numRows; i++) {
          const row = document.createElement('tr');
          for (let j = 0; j < 7; j++) {
            const cell = document.createElement('td');
            if (i === 0 && j < startingDay || day > daysInMonth) {
              // –ü—É—Å—Ç–∞—è —è—á–µ–π–∫–∞
            } else {
              const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
              const note = JSON.parse(localStorage.getItem(`calendar_${currentBar}_${dateStr}`) || '{}');
              cell.innerHTML = `
                <div class="day-number">${day}</div>
                <div class="note-section">
                  <input type="text" class="band-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã" value="${note.bandName || ''}">
                  <input type="text" class="price" placeholder="–¶–µ–Ω–∞ (—Ç—ã—Å. —Ä—É–±)" value="${note.price || ''}">
                  <div class="checkbox-container">
                    <label><input type="checkbox" id="account" ${note.account ? 'checked' : ''}> –°—á—ë—Ç</label>
                    <label><input type="checkbox" id="sound" ${note.sound ? 'checked' : ''}> –ó–≤—É–∫</label>
                  </div>
                  <input type="text" class="notes" placeholder="–ó–∞–º–µ—Ç–∫–∏" value="${note.notes || ''}">
                </div>`;
              cell.setAttribute('data-date', dateStr);
              cell.style.setProperty('--index', i * 7 + j);
              if (Object.values(note).some(val => val)) cell.classList.add('has-note');
              day++;
            }
            row.appendChild(cell);
          }
          calendarBody.appendChild(row);
        }
      }

      // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–º—ã
      function updateTheme(bar) {
        body.classList.remove('elmucho', 'clever');
        calendar.classList.remove('elmucho', 'clever');
        entryList.classList.remove('elmucho', 'clever');
        document.querySelector('.button-container').classList.remove('elmucho', 'clever');

        body.classList.add(bar);
        calendar.classList.add(bar);
        entryList.classList.add(bar);
        document.querySelector('.button-container').classList.add(bar);
      }
    });
  </script>
</body>
</html>
